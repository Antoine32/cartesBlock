!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.netcode=t():e.netcode=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){
/*!
 * tom32i-event-emitter.js - 2.0.1
 * https://github.com/Tom32i/event-emitter.js
 * Copyright 2016 Thomas JARRAND
 */
e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=o.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._events={},this.on=this.addEventListener,this.off=this.removeEventListener}return n(e,[{key:"emit",value:function(e){if(this._events.hasOwnProperty(e))for(var t=this._events[e],n=Array.prototype.slice.call(arguments,1),r=t.length,o=0;o<r;o++)this.handle(t[o],n)}},{key:"handle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))}},{key:"addEventListener",value:function(e,t){this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].indexOf(t)<0&&this._events[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(this._events.hasOwnProperty(e)){var n=this._events[e],r=n.indexOf(t);r>=0&&n.splice(r,1),0===n.length&&delete this._events[e]}}}]),e}();t.default=r}])},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"binaryType",get:function(){return null}},{key:"reservedEvents",get:function(){return["open","close","error"]}}],(n=[{key:"encode",value:function(e,t){if(this.constructor.reservedEvents.includes(e))throw new Error('"'.concat(e,'" is a reserved event name.'));return JSON.stringify({name:e,data:t})}},{key:"decode",value:function(e){try{return JSON.parse(e)}catch(e){return null}}}])&&i(t.prototype,n),r&&i(t,r),e}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function t(e){var n,r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=a(t).call(this))||"object"!==c(o)&&"function"!=typeof o?s(r):o).encoder=i,n.socket=new WebSocket(e,"websocket"),n.encoder.constructor.binaryType&&(n.socket.binaryType=n.encoder.constructor.binaryType),n.onOpen=n.onOpen.bind(s(s(n))),n.onClose=n.onClose.bind(s(s(n))),n.onError=n.onError.bind(s(s(n))),n.onMessage=n.onMessage.bind(s(s(n))),n.socket.addEventListener("open",n.onOpen),n.socket.addEventListener("close",n.onClose),n.socket.addEventListener("error",n.onError),n.socket.addEventListener("message",n.onMessage),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,o.a),n=t,(r=[{key:"send",value:function(e,t){this.socket.send(this.encoder.encode(e,t))}},{key:"close",value:function(){this.socket.close()}},{key:"onOpen",value:function(){this.emit("open",this)}},{key:"onMessage",value:function(e){var t=this.encoder.decode(e.data),n=t.name,r=t.data;this.emit(n,r)}},{key:"onClose",value:function(){this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("error",this.onError),this.socket.removeEventListener("message",this.onMessage),this.emit("close",this)}},{key:"onError",value:function(e){this.emit("error",e,this)}}])&&f(n.prototype,r),i&&f(n,i),t}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getByteLength",value:function(e){return 0}},{key:"encode",value:function(e,t,n){}},{key:"decode",value:function(e,t){return null}}])&&p(t.prototype,n),r&&p(t,r),e}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,g(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,b),n=t,(r=[{key:"getByteLength",value:function(){return Uint8Array.BYTES_PER_ELEMENT}},{key:"encode",value:function(e,t,n){new DataView(e).setUint8(t,n)}},{key:"decode",value:function(e,t){return new DataView(e).getUint8(t)}}])&&d(n.prototype,r),o&&d(n,o),t}();function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}var j=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new w;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.idCodec=r,this.handlersByName=new Map(t),this.handlersById=Array.from(this.handlersByName.values()),t.forEach(function(e,t){var r=O(e,2),o=r[0],i=r[1];if(i.id=t,i.name=o,n.constructor.reservedEvents.includes(o))throw new Error('"'.concat(o,'" is a reserved event name.'))})}return E(e,null,[{key:"binaryType",get:function(){return"arraybuffer"}},{key:"reservedEvents",get:function(){return["open","close","error"]}}]),E(e,[{key:"encode",value:function(e,t){var n=this.handlersByName.get(e);if(!n)throw new Error('No handler found for event "'.concat(e,'"'));var r=this.idCodec.getByteLength(),o=new ArrayBuffer(r+n.getByteLength(t));return this.idCodec.encode(o,0,n.id),n.encode(o,r,t),o}},{key:"decode",value:function(e){if(!e.byteLength)throw new Error("Empty buffer");var t=this.idCodec.decode(e,0),n=this.handlersById[t];if(!n)throw new Error('No handler found at index "'.concat(t,'"'));return{name:n.name,data:n.decode(e,this.idCodec.getByteLength())}}}]),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,C(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,b),n=t,(r=[{key:"getByteLength",value:function(){return Uint16Array.BYTES_PER_ELEMENT}},{key:"encode",value:function(e,t,n){new DataView(e).setUint16(t,n)}},{key:"decode",value:function(e,t){return new DataView(e).getUint16(t)}}])&&S(n.prototype,r),o&&S(n,o),t}();function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U(this,A(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,b),n=t,(r=[{key:"getByteLength",value:function(){return Uint32Array.BYTES_PER_ELEMENT}},{key:"encode",value:function(e,t,n){new DataView(e).setUint32(t,n)}},{key:"decode",value:function(e,t){return new DataView(e).getUint32(t)}}])&&B(n.prototype,r),o&&B(n,o),t}();function V(e,t){return"0".repeat(8*t-e.length)+e}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=I(this,J(t).call(this))).byteLength=e,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,b),n=t,(r=[{key:"getByteLength",value:function(){return this.byteLength}},{key:"encode",value:function(e,t,n){var r=new DataView(e,t,this.byteLength);V(n.toString(2),this.byteLength).match(/.{8}/g).forEach(function(e,t){return r.setUint8(t,parseInt(e,2))})}},{key:"decode",value:function(e,t){var n=new Uint8Array(e,t,this.byteLength);return parseInt(Array.from(n).map(function(e){return V(e.toString(2),1)}).join(""),2)}}])&&N(n.prototype,r),o&&N(n,o),t}();function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),F(this,G(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,b),n=t,(r=[{key:"getByteLength",value:function(){return 1}},{key:"encode",value:function(e,t,n){new DataView(e).setUint8(t,n?1:0)}},{key:"decode",value:function(e,t){return new DataView(e).getUint8(t)>0}}])&&z(n.prototype,r),o&&z(n,o),t}();function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,$(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,b),n=t,(r=[{key:"getByteLength",value:function(e){return 1+2*(e||"").length}},{key:"encode",value:function(e,t,n){var r=new DataView(e,t,this.getByteLength(n)),o=(n||"").length;r.setUint8(0,o);for(var i=0;i<o;i++)r.setUint16(1+2*i,n[i].charCodeAt(0))}},{key:"decode",value:function(e,t){for(var n=new DataView(e,t),r=n.getUint8(0),o=new Array(r),i=0;i<r;i++)o[i]=n.getUint16(1+2*i);return String.fromCharCode.apply(String,o)}}])&&X(n.prototype,r),o&&X(n,o),t}();function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,ie(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,b),n=t,(r=[{key:"getByteLength",value:function(e){return 2+2*(e||"").length}},{key:"encode",value:function(e,t,n){var r=new DataView(e,t,this.getByteLength(n)),o=(n||"").length;r.setUint16(0,o);for(var i=0;i<o;i++)r.setUint16(2+2*i,n[i].charCodeAt(0))}},{key:"decode",value:function(e,t){for(var n=new DataView(e,t),r=n.getUint16(0),o=new Array(r),i=0;i<r;i++)o[i]=n.getUint16(2+2*i);return String.fromCharCode.apply(String,o)}}])&&re(n.prototype,r),o&&re(n,o),t}();n.d(t,"Client",function(){return y}),n.d(t,"JsonEncoder",function(){return u}),n.d(t,"BinaryEncoder",function(){return j}),n.d(t,"Codec",function(){return b}),n.d(t,"Int8Codec",function(){return w}),n.d(t,"Int16Codec",function(){return T}),n.d(t,"Int32Codec",function(){return D}),n.d(t,"LongIntCodec",function(){return W}),n.d(t,"BooleanCodec",function(){return K}),n.d(t,"StringCodec",function(){return te}),n.d(t,"LongStringCodec",function(){return ce})}])});